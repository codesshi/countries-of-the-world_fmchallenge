(this["webpackJsonpcountries-of-the-world_fmchallenge"]=this["webpackJsonpcountries-of-the-world_fmchallenge"]||[]).push([[0],{28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},43:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(22),i=n.n(r),s=(n(28),n(9)),o=(n(29),n(5)),j=(n(30),n(3)),l=n(0),u=Object(c.createContext)(),d=function(e){var t=e.defaultTheme,n=void 0===t?"light":t,a=e.children,r=Object(c.useState)(n),i=Object(j.a)(r,2),s=i[0],o=i[1],d={theme:s,toggleTheme:function(){o("light"===s?"dark":"light")}};return Object(l.jsx)(u.Provider,{value:d,children:Object(l.jsx)("div",{className:"dark"===s?"dark-theme":"none",style:{height:"100%",background:"var(--secondary-color)"},children:a})})},b=function(){return Object(c.useContext)(u)},h=function(){var e=b(),t=e.theme,n=e.toggleTheme,c="light"===t?"Dark Mode":"Light Mode";return Object(l.jsx)("button",{className:"toggle-theme-btn","data-theme":t,onClick:n,children:c})},O=(n(32),function(e){var t=e.className,n=(void 0===t?"":t).split(" ");return Object(l.jsxs)("div",{className:["navbar"].concat(Object(o.a)(n)).join(" "),children:[Object(l.jsx)("h1",{children:"Where in the world?"}),Object(l.jsx)(h,{})]})}),f=n(2),m=(n(33),n(34),function(e){var t=e.search,n=e.reset,a=e.className,r=void 0===a?"":a,i=Object(c.useState)(""),s=Object(j.a)(i,2),u=s[0],d=s[1],h=Object(c.useState)(!1),O=Object(j.a)(h,2),f=O[0],m=O[1],x=b().theme,p=r.split(" ");return Object(l.jsxs)("div",{className:["searchbar"].concat(Object(o.a)(p)).join(" "),onClick:function(e){d("")},"data-empty":""===u||f,"data-theme":x,children:[f&&Object(l.jsxs)("span",{className:"search-label",children:[u,Object(l.jsx)("button",{onClick:function(e){e.stopPropagation(),m(!1),d(""),n()}})]}),!f&&Object(l.jsx)("form",{onSubmit:function(e){e.preventDefault(),m(!0),t(u)},children:Object(l.jsx)("input",{type:"text",value:u,placeholder:"Search for a country...",onChange:function(e){d(e.target.value)},onClick:function(e){return e.stopPropagation()}})})]})}),x=(n(35),function(e){var t=e.onRegionSelected,n=b().theme;return Object(l.jsx)("div",{className:"region-selector",onChange:function(e){var n=e.target.value;t(n)},"data-theme":n,children:Object(l.jsxs)("select",{name:"regions",children:[Object(l.jsx)("option",{value:"UNSELECTED",children:"Filter by Region"}),Object(l.jsx)("option",{value:"Africa",children:"Africa"}),Object(l.jsx)("option",{value:"Americas",children:"Americas"}),Object(l.jsx)("option",{value:"Asia",children:"Asia"}),Object(l.jsx)("option",{value:"Europe",children:"Europe"}),Object(l.jsx)("option",{value:"Oceania",children:"Oceania"})]})})}),p=(n(36),n(37),function(e){var t,n=e.name,c=e.population,a=e.region,r=e.capital;return Object(l.jsxs)("div",{className:"card-data",children:[Object(l.jsx)("h2",{children:n}),Object(l.jsxs)("dl",{children:[Object(l.jsx)("dt",{children:"Population"}),Object(l.jsx)("dd",{children:(t=c,new Intl.NumberFormat("en-US").format(t))}),Object(l.jsx)("dt",{children:"Region"}),Object(l.jsx)("dd",{children:a}),Object(l.jsx)("dt",{children:"Capital"}),Object(l.jsx)("dd",{children:r})]})]})}),v=function(){return Object(l.jsxs)("div",{className:"card-data-shimmer card-data",children:[Object(l.jsx)("div",{className:"title shimmer"}),Object(l.jsx)("div",{className:"lines shimmer"}),Object(l.jsx)("div",{className:"lines shimmer"}),Object(l.jsx)("div",{className:"lines shimmer"})]})},g=function(e){var t=e.data,n=e.isReadyCallback,a=e.show,r=t.name,i=t.population,s=t.region,o=t.capital,u=t.flag,d=Object(c.useState)(!0),b=Object(j.a)(d,2),h=b[0],O=b[1],f=Object(c.useState)(!0),m=Object(j.a)(f,2),x=m[0],g=m[1],N=!h&&!x&&a;Object(c.useEffect)((function(){var e=setTimeout((function(){return g(!1)}),1e3);return function(){return clearTimeout(e)}})),Object(c.useEffect)((function(){h||x||n()}));return Object(l.jsxs)("div",{className:"country-card",children:[void 0!==u&&Object(l.jsx)("img",{src:u,alt:"flag of "+r,"data-hide":!N,onLoad:function(){O(!1)}}),!N&&Object(l.jsx)("div",{className:"img-shimmer shimmer"}),N&&Object(l.jsx)(p,{name:r,population:i,region:s,capital:o}),!N&&Object(l.jsx)(v,{})]})},N=Array.from(Array(20),(function(e,t){return{alpha3Code:"empty-".concat(t)}})),C=function(e){var t=e.data,n=e.minLengthWhileLoading,a=void 0===n?10:n,r=e.className,i=(void 0===r?"":r).split(" "),u=Object(c.useRef)(0),d=Object(c.useState)(!1),b=Object(j.a)(d,2),h=b[0],O=b[1],f=t;h||(f=function(e,t){return e.length<t?[].concat(Object(o.a)(e),Object(o.a)(N.slice(e.length,t))):e}(t,a));var m=function(){u.current+=1,u.current===t.length&&O(!0)};return Object(l.jsx)("ul",{className:["country-list"].concat(Object(o.a)(i)).join(" "),children:f.map((function(e){return Object(l.jsx)("li",{"data-key":e.alpha3Code,children:Object(l.jsx)(s.b,{to:"/countries/".concat(e.alpha3Code),children:Object(l.jsx)(g,{data:e,isReadyCallback:m,show:h})})},e.alpha3Code)}))})},S=(n(43),function(e){var t=e.action,n=e.className,c=(void 0===n?"":n).split(" "),a=b().theme;return Object(l.jsx)("button",{className:["more-button"].concat(Object(o.a)(c)).join(" "),onClick:t,"data-theme":a,children:"MORE"})}),E=n(20),L=n(11),k=n.n(L),w=n(15),y="https://restcountries.eu/rest/v2",R=function(){var e=Object(w.a)(k.a.mark((function e(){var t,n,c,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=["name","alpha3Code","population","region","capital","flag"],n="".concat(y,"/all?fields=").concat(t.join(";")),e.next=4,fetch(n);case 4:if((c=e.sent).ok){e.next=7;break}throw new Error("Request Failed");case 7:return e.next=9,c.json();case 9:return a=e.sent,e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(w.a)(k.a.mark((function e(t){var n,c,a,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=2;break}throw new Error("EMPTY_STRING");case 2:return n=["name","alpha3Code","population","region","capital","flag"],c="".concat(y,"/name/").concat(t,"?fields=").concat(n.join(";")),e.next=6,fetch(c);case 6:if((a=e.sent).ok){e.next=11;break}if(404!==a.status){e.next=10;break}throw new Error("NO_MATCH");case 10:throw new Error("FAILED_REQUEST");case 11:return e.next=13,a.json();case 13:return r=e.sent,e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(e){return new Promise((function(t,n){fetch("".concat(y,"/alpha/").concat(e)).then((function(e){if(e.ok)return e.json();n("DATA NOT FOUND")})).then((function(e){t(e)}))}))},D=function(e){if(0===e.borders.length)return Promise.resolve(e);var t=e.borders.join(";");return new Promise((function(n,c){0===t.length&&n(e),fetch("".concat(y,"/alpha?codes=").concat(t,"&fields=alpha3Code;name")).then((function(e){if(e.ok)return e.json();c("COULD NOT RETRIEVE BORDERS")})).then((function(t){n(Object(E.a)(Object(E.a)({},e),{},{borders:t}))}))}))},M=function(e){var t=Object(c.useState)({status:"LOADING"}),n=Object(j.a)(t,2),a=n[0],r=n[1];return Object(c.useEffect)((function(){var t;r({status:"LOADING"}),(t=e,Promise.resolve(t)).then(A).then(D).then((function(e){return r({status:"OK",data:e})})).catch((function(e){return r({status:"ERR",err:e})}))}),[e]),a},P=function(){return Object(l.jsx)("div",{className:"no-match",children:"No Results"})},F=function(e){var t=e.region,n=e.pagination,a=e.onLoadMore,r=function(){var e=Object(c.useState)({isLoading:!0}),t=Object(j.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){R().then((function(e){return a({isLoading:!1,list:e})})).catch((function(e){return a({err:e})}))}),[]),n}(),i=r.list,s=r.isLoading,o=r.err;if(s)return Object(l.jsx)(C,{className:"CountryList",data:[]});if(o)return Object(l.jsx)(P,{});var u=I(i,t);return 0===u.length?Object(l.jsx)(P,{}):Object(l.jsxs)("div",{children:[Object(l.jsx)(C,{className:"CountryList",data:u.slice(0,n)},"all"),u.length>n&&Object(l.jsx)(S,{className:"MoreButton",action:a})]})},B=function(e){var t=e.input,n=e.region,a=e.pagination,r=e.onLoadMore,i=function(e){var t=Object(c.useState)({isSearching:!0}),n=Object(j.a)(t,2),a=n[0],r=n[1];return Object(c.useEffect)((function(){T(e).then((function(e){return r({isSearching:!1,list:e})})).catch((function(e){return r({err:e})}))}),[e]),a}(t),s=i.list,o=i.isSearching,u=i.err;if(o)return Object(l.jsx)(C,{className:"CountryList",data:[]});if(u)return Object(l.jsx)(P,{});var d=I(s,n);return 0===d.length?Object(l.jsx)(P,{}):Object(l.jsxs)("div",{children:[Object(l.jsx)(C,{className:"CountryList",data:d.slice(0,a)},t),d.length>a&&Object(l.jsx)(S,{className:"MoreButton",action:r})]})},I=function(e,t){return"UNSELECTED"===t?e:e.filter((function(e){return e.region===t}))},U=function(e){var t=e.className,n=void 0===t?"":t,a=Object(c.useState)(20),r=Object(j.a)(a,2),i=r[0],s=r[1],u=Object(c.useState)("ALL"),d=Object(j.a)(u,2),b=d[0],h=d[1],O=Object(c.useState)("UNSELECTED"),f=Object(j.a)(O,2),p=f[0],v=f[1],g=Object(c.useState)(""),N=Object(j.a)(g,2),C=N[0],S=N[1],E=n.split(" ");return Object(l.jsxs)("section",{className:["home"].concat(Object(o.a)(E)).join(" "),children:[Object(l.jsxs)("div",{className:"toolbar",children:[Object(l.jsx)(m,{className:"SearchBar",search:function(e){h("SEARCH"),S(e),s(20)},reset:function(){h("ALL"),s(20)}}),Object(l.jsx)(x,{onRegionSelected:function(e){v(e),s(20)}})]}),"ALL"===b&&Object(l.jsx)(F,{region:p,pagination:i,onLoadMore:function(){return s(i+20)}}),"SEARCH"===b&&Object(l.jsx)(B,{input:C,region:p,pagination:i,onLoadMore:function(){return s(i+20)}})]})},_=(n(45),n(46),function(e){var t=e.className,n=void 0===t?"":t,c=e.backCallback,a=n.split(" "),r=b().theme;return Object(l.jsx)("button",{className:["back-button"].concat(Object(o.a)(a)).join(" "),onClick:c,"data-theme":r,children:"Back"})}),G=(n(47),function(e){var t=e.data;return Object(l.jsxs)("div",{className:"details-container",children:[Object(l.jsx)("h2",{children:t.name}),Object(l.jsxs)("dl",{className:"details",children:[Object(l.jsx)("dt",{children:"Native Name"}),Object(l.jsx)("dd",{children:t.nativeName}),Object(l.jsx)("dt",{children:"Population"}),Object(l.jsx)("dd",{children:t.population}),Object(l.jsx)("dt",{children:"Region"}),Object(l.jsx)("dd",{children:t.region}),Object(l.jsx)("dt",{children:"Sub Region"}),Object(l.jsx)("dd",{children:t.subregion}),Object(l.jsx)("dt",{children:"Capital"}),Object(l.jsx)("dd",{children:t.capital})]}),Object(l.jsxs)("dl",{className:"details",children:[Object(l.jsx)("dt",{children:"Top Level Domain"}),Object(l.jsx)("dd",{children:t.topLevelDomain}),Object(l.jsx)("dt",{children:"Currencies"}),Object(l.jsx)("dd",{children:t.currencies.map((function(e){return e.name})).join(", ")}),Object(l.jsx)("dt",{children:"Languages"}),Object(l.jsx)("dd",{children:t.languages.map((function(e){return e.name})).join(", ")})]}),t.borders.length>0&&Object(l.jsx)(J,{borders:t.borders})]})}),H=function(){return Object(l.jsxs)("div",{className:"details-shimmer",children:[Object(l.jsx)("div",{className:"title shimmer"}),Object(l.jsx)("div",{className:"lines shimmer"}),Object(l.jsx)("div",{className:"lines shimmer"}),Object(l.jsx)("div",{className:"lines shimmer"}),Object(l.jsx)("div",{className:"lines shimmer"})]})},J=function(e){var t=e.borders;return Object(l.jsxs)("dl",{className:"details borders",children:[Object(l.jsx)("dt",{children:"Border Countries"}),Object(l.jsx)("dd",{children:t.map((function(e){return Object(l.jsx)(s.b,{to:"/countries/".concat(e.alpha3Code),children:e.name},e.alpha3Code)}))})]})},W=function(e){var t=e.className,n=void 0===t?"":t,a=e.data,r=n.split(" "),i=Object(c.useState)(!1),s=Object(j.a)(i,2),u=s[0],d=s[1],b=Object(c.useState)(!1),h=Object(j.a)(b,2),O=h[0],f=h[1],m=u&&O;Object(c.useEffect)((function(){var e=setTimeout((function(){return f(!0)}),600);return function(){return clearTimeout(e)}}),[]);return Object(l.jsxs)("div",{className:["country-details"].concat(Object(o.a)(r)).join(" "),children:[void 0!==a&&Object(l.jsx)("img",{src:a.flag,alt:"flag of ".concat(a.name),"data-hide":!m,onLoad:function(){d(!0)}}),!m&&Object(l.jsx)("div",{className:"shimmer img-shimmer"}),m&&Object(l.jsx)(G,{data:a}),!m&&Object(l.jsx)(H,{})]})},q=function(e){var t=e.className,n=void 0===t?"":t,c=Object(f.g)().code,a=M(c),r=Object(f.f)(),i=n.split(" ");return Object(l.jsxs)("section",{className:["details-section"].concat(Object(o.a)(i)).join(" "),children:[Object(l.jsx)(_,{className:"flex-start",backCallback:function(){r.push("/")}}),Object(l.jsx)(W,{className:"margin-top",data:a.data},c)]})};function K(){return Object(l.jsx)(d,{children:Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(O,{className:"padding-x no-shrink"}),Object(l.jsx)("div",{className:"content",children:Object(l.jsxs)(f.c,{children:[Object(l.jsx)(f.a,{exact:!0,path:"/",children:Object(l.jsx)(U,{})}),Object(l.jsx)(f.a,{exact:!0,path:"/countries/:code",children:Object(l.jsx)(q,{})})]})})]})})}var Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,49)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))};i.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(s.a,{children:Object(l.jsx)(K,{})})}),document.getElementById("root")),Q()}},[[48,1,2]]]);
//# sourceMappingURL=main.f0a33b4a.chunk.js.map