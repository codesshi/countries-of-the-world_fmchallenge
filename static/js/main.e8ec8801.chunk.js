(this["webpackJsonpcountries-of-the-world_fmchallenge"]=this["webpackJsonpcountries-of-the-world_fmchallenge"]||[]).push([[0],{28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(22),i=n.n(r),s=(n(28),n(10)),o=(n(29),n(5)),l=(n(30),n(3)),j=n(0),u=Object(c.createContext)(),d=function(e){var t=e.defaultTheme,n=void 0===t?"light":t,a=e.children,r=Object(c.useState)(n),i=Object(l.a)(r,2),s=i[0],o=i[1],d={theme:s,toggleTheme:function(){o("light"===s?"dark":"light")}};return Object(j.jsx)(u.Provider,{value:d,children:Object(j.jsx)("div",{className:"dark"===s?"dark-theme":"none",style:{height:"100%",background:"var(--secondary-color)"},children:a})})},b=function(){return Object(c.useContext)(u)},h=function(){var e=b(),t=e.theme,n=e.toggleTheme,c="light"===t?"Dark Mode":"Light Mode";return Object(j.jsx)("button",{className:"toggle-theme-btn","data-theme":t,onClick:n,children:c})},O=(n(32),function(e){var t=e.className,n=(void 0===t?"":t).split(" ");return Object(j.jsxs)("div",{className:["navbar"].concat(Object(o.a)(n)).join(" "),children:[Object(j.jsx)("h1",{children:"Where in the world?"}),Object(j.jsx)(h,{})]})}),f=n(2),m=(n(33),n(34),function(e){var t=e.search,n=e.reset,a=e.className,r=void 0===a?"":a,i=Object(c.useState)(""),s=Object(l.a)(i,2),u=s[0],d=s[1],h=Object(c.useState)(!1),O=Object(l.a)(h,2),f=O[0],m=O[1],x=b().theme,v=r.split(" ");return Object(j.jsxs)("div",{className:["searchbar"].concat(Object(o.a)(v)).join(" "),onClick:function(e){d("")},"data-empty":""===u||f,"data-theme":x,children:[f&&Object(j.jsxs)("span",{className:"search-label",children:[u,Object(j.jsx)("button",{onClick:function(e){e.stopPropagation(),m(!1),d(""),n()}})]}),!f&&Object(j.jsx)("form",{onSubmit:function(e){e.preventDefault(),m(!0),t(u)},children:Object(j.jsx)("input",{type:"text",value:u,placeholder:"Search for a country...",onChange:function(e){d(e.target.value)},onClick:function(e){return e.stopPropagation()}})})]})}),x=(n(35),function(e){var t=e.onRegionSelected,n=b().theme;return Object(j.jsx)("div",{className:"region-selector",onChange:function(e){var n=e.target.value;t(n)},"data-theme":n,children:Object(j.jsxs)("select",{name:"regions",children:[Object(j.jsx)("option",{value:"UNSELECTED",children:"Filter by Region"}),Object(j.jsx)("option",{value:"Africa",children:"Africa"}),Object(j.jsx)("option",{value:"Americas",children:"Americas"}),Object(j.jsx)("option",{value:"Asia",children:"Asia"}),Object(j.jsx)("option",{value:"Europe",children:"Europe"}),Object(j.jsx)("option",{value:"Oceania",children:"Oceania"})]})})}),v=(n(36),n(37),function(e){var t,n=e.name,c=e.population,a=e.region,r=e.capital;return Object(j.jsxs)("div",{className:"card-data",children:[Object(j.jsx)("h2",{children:n}),Object(j.jsxs)("dl",{children:[Object(j.jsx)("dt",{children:"Population"}),Object(j.jsx)("dd",{children:(t=c,new Intl.NumberFormat("en-US").format(t))}),Object(j.jsx)("dt",{children:"Region"}),Object(j.jsx)("dd",{children:a}),Object(j.jsx)("dt",{children:"Capital"}),Object(j.jsx)("dd",{children:r})]})]})}),p=function(){return Object(j.jsxs)("div",{className:"card-data-shimmer card-data",children:[Object(j.jsx)("div",{className:"title shimmer"}),Object(j.jsx)("div",{className:"lines shimmer"}),Object(j.jsx)("div",{className:"lines shimmer"}),Object(j.jsx)("div",{className:"lines shimmer"})]})},g=function(e){var t=e.data,n=e.isReadyCallback,a=e.show,r=t.name,i=t.population,s=t.region,o=t.capital,u=t.flag,d=Object(c.useState)(!0),b=Object(l.a)(d,2),h=b[0],O=b[1],f=Object(c.useState)(!0),m=Object(l.a)(f,2),x=m[0],g=m[1],N=!h&&!x&&a;Object(c.useEffect)((function(){var e=setTimeout((function(){return g(!1)}),1e3);return function(){return clearTimeout(e)}})),Object(c.useEffect)((function(){h||x||n()}));return Object(j.jsxs)("div",{className:"country-card",children:[void 0!==u&&Object(j.jsx)("img",{src:u,alt:"flag of "+r,"data-hide":!N,onLoad:function(){O(!1)}}),!N&&Object(j.jsx)("div",{className:"img-shimmer shimmer"}),N&&Object(j.jsx)(v,{name:r,population:i,region:s,capital:o}),!N&&Object(j.jsx)(p,{})]})},N=Array.from(Array(20),(function(e,t){return{alpha3Code:"empty-".concat(t)}})),C=function(e){var t=e.data,n=e.minLengthWhileLoading,a=void 0===n?10:n,r=e.className,i=(void 0===r?"":r).split(" "),u=Object(c.useRef)(0),d=Object(c.useState)(!1),b=Object(l.a)(d,2),h=b[0],O=b[1],f=t;h||(f=function(e,t){return e.length<t?[].concat(Object(o.a)(e),Object(o.a)(N.slice(e.length,t))):e}(t,a));var m=function(){u.current+=1,u.current===t.length&&O(!0)};return Object(j.jsx)("ul",{className:["country-list"].concat(Object(o.a)(i)).join(" "),children:f.map((function(e){return Object(j.jsx)("li",{"data-key":e.alpha3Code,children:Object(j.jsx)(s.b,{to:"/countries/".concat(e.alpha3Code),children:Object(j.jsx)(g,{data:e,isReadyCallback:m,show:h})})},e.alpha3Code)}))})},S=n(9),E=n(12),k=n.n(E),L=n(16),A="https://restcountries.eu/rest/v2",w=function(){var e=Object(L.a)(k.a.mark((function e(){var t,n,c,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=["name","alpha3Code","population","region","capital","flag"],n="".concat(A,"/all?fields=").concat(t.join(";")),e.next=4,fetch(n);case 4:if((c=e.sent).ok){e.next=7;break}throw new Error("Request Failed");case 7:return e.next=9,c.json();case 9:return a=e.sent,e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(L.a)(k.a.mark((function e(t){var n,c,a,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=2;break}throw new Error("EMPTY_STRING");case 2:return n=["name","alpha3Code","population","region","capital","flag"],c="".concat(A,"/name/").concat(t,"?fields=").concat(n.join(";")),e.next=6,fetch(c);case 6:if((a=e.sent).ok){e.next=11;break}if(404!==a.status){e.next=10;break}throw new Error("NO_MATCH");case 10:throw new Error("FAILED_REQUEST");case 11:return e.next=13,a.json();case 13:return r=e.sent,e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(e){return new Promise((function(t,n){fetch("".concat(A,"/alpha/").concat(e)).then((function(e){if(e.ok)return e.json();n("DATA NOT FOUND")})).then((function(e){t(e)}))}))},T=function(e){if(0===e.borders.length)return Promise.resolve(e);var t=e.borders.join(";");return new Promise((function(n,c){0===t.length&&n(e),fetch("".concat(A,"/alpha?codes=").concat(t,"&fields=alpha3Code;name")).then((function(e){if(e.ok)return e.json();c("COULD NOT RETRIEVE BORDERS")})).then((function(t){n(Object(S.a)(Object(S.a)({},e),{},{borders:t}))}))}))},D=function(e){var t=Object(c.useState)({status:"LOADING"}),n=Object(l.a)(t,2),a=n[0],r=n[1];return Object(c.useEffect)((function(){var t;r({status:"LOADING"}),(t=e,Promise.resolve(t)).then(R).then(T).then((function(e){return r({status:"OK",data:e})})).catch((function(e){return r({status:"ERR",err:e})}))}),[e]),a},P=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(c.useEffect)((function(){if(t){var n=!1,c=document.querySelector(".App"),a=function(t){var a=Math.abs(c.scrollHeight-c.scrollTop-c.clientHeight)<10;!a&&n&&(n=!1),a&&!n&&(console.log("end of page"),n=!0,e())};return c.addEventListener("scroll",a),function(){return c.removeEventListener("scroll",a)}}}),[e,t])},F=function(e){return function(t){return t.region===e}},I={Africa:F("Africa"),Americas:F("Americas"),Asia:F("Asia"),Europe:F("Europe"),Oceania:F("Oceania")},B=function(){return Object(j.jsx)("div",{className:"no-match",children:"No Results"})},M=function(e){var t=e.region,n=function(e){var t=Object(c.useState)({isLoading:!0,list:[]}),n=Object(l.a)(t,2),a=n[0],r=n[1];return Object(c.useEffect)((function(){w().then((function(e){return r({isLoading:!1,list:e})})).catch((function(e){return r({isLoading:!1,err:e,list:[]})}))}),[]),e?Object(S.a)(Object(S.a)({},a),{},{list:a.list.filter(e)}):a}(I[t]),a=n.list,r=n.err,i=Object(c.useState)(20),s=Object(l.a)(i,2),o=s[0],u=s[1];return P((function(){u(o+20)}),o<a.length),r?Object(j.jsx)(B,{}):Object(j.jsx)("div",{children:Object(j.jsx)(C,{className:"CountryList",data:a.slice(0,o)},"all")})},U=function(e){var t=e.query,n=e.region,a=function(e,t){var n=Object(c.useState)({isSearching:!0,list:[]}),a=Object(l.a)(n,2),r=a[0],i=a[1];return Object(c.useEffect)((function(){y(e).then((function(e){return i({isSearching:!1,list:e})})).catch((function(e){return i({isSearching:!1,err:e,list:[]})}))}),[e]),t?Object(S.a)(Object(S.a)({},r),{},{list:r.list.filter(t)}):r}(t,I[n]),r=a.list,i=a.isSearching,s=a.err,o=Object(c.useState)(20),u=Object(l.a)(o,2),d=u[0],b=u[1];return P((function(){b(d+20)}),d<r.length),!i&&0===r.length||s?Object(j.jsx)(B,{}):Object(j.jsx)("div",{children:Object(j.jsx)(C,{className:"CountryList",data:r.slice(0,d)},t)})},_=function(e){var t=e.className,n=void 0===t?"":t,a=Object(c.useState)("ALL"),r=Object(l.a)(a,2),i=r[0],s=r[1],u=Object(c.useState)("UNSELECTED"),d=Object(l.a)(u,2),b=d[0],h=d[1],O=Object(c.useState)(""),f=Object(l.a)(O,2),v=f[0],p=f[1],g=n.split(" ");return Object(j.jsxs)("section",{className:["home"].concat(Object(o.a)(g)).join(" "),children:[Object(j.jsxs)("div",{className:"toolbar",children:[Object(j.jsx)(m,{className:"SearchBar",search:function(e){s("SEARCH"),p(e)},reset:function(){s("ALL")}}),Object(j.jsx)(x,{onRegionSelected:function(e){h(e)}})]}),"ALL"===i&&Object(j.jsx)(M,{region:b},"all-".concat(b)),"SEARCH"===i&&Object(j.jsx)(U,{query:v,region:b})]})},H=(n(44),n(45),function(e){var t=e.className,n=void 0===t?"":t,c=e.backCallback,a=n.split(" "),r=b().theme;return Object(j.jsx)("button",{className:["back-button"].concat(Object(o.a)(a)).join(" "),onClick:c,"data-theme":r,children:"Back"})}),q=(n(46),function(e){var t=e.data;return Object(j.jsxs)("div",{className:"details-container",children:[Object(j.jsx)("h2",{children:t.name}),Object(j.jsxs)("dl",{className:"details",children:[Object(j.jsx)("dt",{children:"Native Name"}),Object(j.jsx)("dd",{children:t.nativeName}),Object(j.jsx)("dt",{children:"Population"}),Object(j.jsx)("dd",{children:t.population}),Object(j.jsx)("dt",{children:"Region"}),Object(j.jsx)("dd",{children:t.region}),Object(j.jsx)("dt",{children:"Sub Region"}),Object(j.jsx)("dd",{children:t.subregion}),Object(j.jsx)("dt",{children:"Capital"}),Object(j.jsx)("dd",{children:t.capital})]}),Object(j.jsxs)("dl",{className:"details",children:[Object(j.jsx)("dt",{children:"Top Level Domain"}),Object(j.jsx)("dd",{children:t.topLevelDomain}),Object(j.jsx)("dt",{children:"Currencies"}),Object(j.jsx)("dd",{children:t.currencies.map((function(e){return e.name})).join(", ")}),Object(j.jsx)("dt",{children:"Languages"}),Object(j.jsx)("dd",{children:t.languages.map((function(e){return e.name})).join(", ")})]}),t.borders.length>0&&Object(j.jsx)(J,{borders:t.borders})]})}),G=function(){return Object(j.jsxs)("div",{className:"details-shimmer",children:[Object(j.jsx)("div",{className:"title shimmer"}),Object(j.jsx)("div",{className:"lines shimmer"}),Object(j.jsx)("div",{className:"lines shimmer"}),Object(j.jsx)("div",{className:"lines shimmer"}),Object(j.jsx)("div",{className:"lines shimmer"})]})},J=function(e){var t=e.borders;return Object(j.jsxs)("dl",{className:"details borders",children:[Object(j.jsx)("dt",{children:"Border Countries"}),Object(j.jsx)("dd",{children:t.map((function(e){return Object(j.jsx)(s.b,{to:"/countries/".concat(e.alpha3Code),children:e.name},e.alpha3Code)}))})]})},W=function(e){var t=e.className,n=void 0===t?"":t,a=e.data,r=n.split(" "),i=Object(c.useState)(!1),s=Object(l.a)(i,2),u=s[0],d=s[1],b=Object(c.useState)(!1),h=Object(l.a)(b,2),O=h[0],f=h[1],m=u&&O;Object(c.useEffect)((function(){var e=setTimeout((function(){return f(!0)}),600);return function(){return clearTimeout(e)}}),[]);return Object(j.jsxs)("div",{className:["country-details"].concat(Object(o.a)(r)).join(" "),children:[void 0!==a&&Object(j.jsx)("img",{src:a.flag,alt:"flag of ".concat(a.name),"data-hide":!m,onLoad:function(){d(!0)}}),!m&&Object(j.jsx)("div",{className:"shimmer img-shimmer"}),m&&Object(j.jsx)(q,{data:a}),!m&&Object(j.jsx)(G,{})]})},K=function(e){var t=e.className,n=void 0===t?"":t,c=Object(f.g)().code,a=D(c),r=Object(f.f)(),i=n.split(" ");return Object(j.jsxs)("section",{className:["details-section"].concat(Object(o.a)(i)).join(" "),children:[Object(j.jsx)(H,{className:"flex-start",backCallback:function(){r.push("/")}}),Object(j.jsx)(W,{className:"margin-top",data:a.data},c)]})};function Q(){return Object(j.jsx)(d,{children:Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(O,{className:"padding-x no-shrink"}),Object(j.jsx)("div",{className:"content",children:Object(j.jsxs)(f.c,{children:[Object(j.jsx)(f.a,{exact:!0,path:"/",children:Object(j.jsx)(_,{})}),Object(j.jsx)(f.a,{exact:!0,path:"/countries/:code",children:Object(j.jsx)(K,{})})]})})]})})}var V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,48)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))};i.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(s.a,{basename:"/countries-of-the-world_fmchallenge",children:Object(j.jsx)(Q,{})})}),document.getElementById("root")),V()}},[[47,1,2]]]);
//# sourceMappingURL=main.e8ec8801.chunk.js.map